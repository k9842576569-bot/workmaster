<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Work Master â€” Validated</title>

<style>
  :root{--accent:#007bff;--ok:#2e8b57;--err:#d9534f}
  body{font-family:Arial,Helvetica,sans-serif;background:#f4f6f8;padding:12px}
  .card{max-width:1000px;margin:12px auto;background:#fff;border-radius:8px;padding:14px;box-shadow:0 6px 18px rgba(0,0,0,.06)}
  h2{margin:6px 0 12px}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  input,select,textarea,button{font-size:15px;padding:8px;border:1px solid #d0d7de;border-radius:6px}
  label{font-weight:600;margin-top:6px;display:block}
  .flex-1{flex:1 1 220px}
  .btn{background:var(--accent);color:#fff;border:none;padding:8px 10px;border-radius:6px;cursor:pointer}
  .btn-secondary{background:#6c757d}
  .btn-danger{background:var(--err)}
  .btn-green{background:var(--ok)}
  table{width:100%;border-collapse:collapse;margin-top:12px;font-size:14px}
  th,td{border:1px solid #e2e8f0;padding:8px}
  th{background:#f1f5f9}
  .hidden{display:none}
</style>
</head>

<body>

<div class="card" id="loginCard">
  <h2>Staff Login</h2>
  <input id="loginMobile" placeholder="Mobile">
  <input id="loginPassword" type="password" placeholder="Password">
  <button class="btn" onclick="login()">Login</button>
  <p id="loginMsg" style="color:red"></p>
</div>

<div class="card hidden" id="appCard">
<h2>Work Master Data Entry</h2>

<label>Date</label>
<input type="date" id="workDate">

<label>Branch Code</label>
<input id="branchCode">

<label>Branch Name</label>
<input id="branchName" readonly>

<input type="hidden" id="district">
<input type="hidden" id="pincode">

<!-- ===== IN TIME (12 HOUR) ===== -->
<label>In Time</label>
<div class="row">
  <input id="inHour" type="number" min="1" max="12" placeholder="HH">
  <input id="inMinute" type="number" min="0" max="59" placeholder="MM">
  <select id="inAmPm"><option>AM</option><option>PM</option></select>
</div>
<input type="hidden" id="inTime">

<!-- ===== OUT TIME (12 HOUR) ===== -->
<label>Out Time</label>
<div class="row">
  <input id="outHour" type="number" min="1" max="12" placeholder="HH">
  <input id="outMinute" type="number" min="0" max="59" placeholder="MM">
  <select id="outAmPm"><option>AM</option><option>PM</option></select>
</div>
<input type="hidden" id="outTime">

<label>Remarks</label>
<textarea id="remarks"></textarea>

<button class="btn" onclick="onSave()">Save</button>

<table>
<thead>
<tr>
<th>#</th><th>Date</th><th>Branch</th><th>In</th><th>Out</th><th>Remarks</th>
</tr>
</thead>
<tbody id="dataBody"></tbody>
</table>

</div>

<script>
let workData = JSON.parse(localStorage.getItem('workData')||'[]');

/* ===== TIME CONVERSION (ONLY ADDITION) ===== */
function convertTo24(h,m,ap){
  h=parseInt(h); m=String(m).padStart(2,'0');
  if(ap==='PM' && h!==12) h+=12;
  if(ap==='AM' && h===12) h=0;
  return String(h).padStart(2,'0')+':'+m;
}

/* ===== SAVE (ORIGINAL LOGIC PRESERVED) ===== */
function onSave(){

  document.getElementById('inTime').value =
    convertTo24(inHour.value,inMinute.value,inAmPm.value);

  document.getElementById('outTime').value =
    convertTo24(outHour.value,outMinute.value,outAmPm.value);

  const r={
    date:workDate.value,
    code:branchCode.value,
    name:branchName.value,
    in:inTime.value,
    out:outTime.value,
    rem:remarks.value
  };

  workData.push(r);
  localStorage.setItem('workData',JSON.stringify(workData));
  renderTable();
}

/* ===== TABLE ===== */
function renderTable(){
  dataBody.innerHTML='';
  workData.forEach((r,i)=>{
    dataBody.innerHTML+=`
      <tr>
        <td>${i+1}</td>
        <td>${r.date}</td>
        <td>${r.code}</td>
        <td>${r.in}</td>
        <td>${r.out}</td>
        <td>${r.rem}</td>
      </tr>`;
  });
}

renderTable();

/* ===== LOGIN (UNCHANGED BASIC DEMO) ===== */
function login(){
  loginCard.classList.add('hidden');
  appCard.classList.remove('hidden');
}
</script>

</body>
</html>
